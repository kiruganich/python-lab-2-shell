# MiniShell — Мини-оболочка с файловыми командами

## Уровень Medium

### **Цель:** Реализовать программу для работы с файловой системой средствами Python

### **Функционал:**
- Базовые команды:
    - ls (просмотр содержания директории)
    - cd с поддержкой ".." и "~" (перемещение между директориями)
    - cp (копирования файла или каталога)
    - mv (перемещение файла или каталога)
    - rm (удаление файла или каталога)
    - cat (просмотр файла)
- Дополнительные плагины:
    - Поддержка архивов zip и tar (команды: zip, unzip, tar, untar)
    - grep (поиск файлов по содержимому)
    - history (сохранение и вывод истории команд)
    - undo (отмена последней команды)
- Поддержка расширений функций:
    - "-l" (расширенный вывод)
    - "-r" (рекурсивный подход)
    - "-i" (игнорирование регистра)
- Логирование всех действий

### **Особенности:** 
- Отображение актуальной директории перед полем для воода команды
- Поддержка относительных и абсолютных путей
- Команда cd без аргументов поеремещает в домашнюю директорию
- Кроссплатформенность оболочки благодаря использованию pathlib (Windows, macOS, Linux)
- Собственные исколючения для большинства случаев
- Возможность ввода путей с пробелами в двойных кавычках
- Пояснения о работе команды при неполноценном вводе (пример: cp -> Использование: cp [-r] <источник> <назначение>)
- Проверка безопасности: запрет на работу с / и ..
- Подтверждение при рекурсивном удалении каталогов (rm -r)

## Структура проекта

```
python-lab-2-shell/
│
├── main.py                      # Точка входа — запуск оболочки
├── src/
│   ├── __init__.py
│   ├── logger.py                # Настройка логирования через logging
│   ├── validator.py             # Валидация путей и аргументов
│   ├── parser.py                # Парсинг команд с поддержкой кавычек
│   └── commands/
│       ├── basic.py             # Базовые команды (ls, cd, cat, cp, mv, rm)
│       ├── archive.py           # Архивы (zip, tar)
│       ├── grep.py              # Поиск по содержимому
│       └── history.py           # История команд и undo
├── data/
│   ├── .history                 # История команд (сохраняется между запусками)
│   └── .trash/                  # Корзина для восстановления удалённых файлов
├── logs/
│   └── shell.log                # Лог всех действий
├── tests/
│   └── test_shell.py            # Тесты для всех команд (pytest)
├── requirements.txt
└── README.md
```

## Установка

### 1. Клонируйте репозиторий:
```bash
git clone https://github.com/kiruganich/python-lab-2-shell.git
cd python-lab-2-shell
```

### 2. Установите зависимости:

```bash
pip install -r requirements.txt
```

### 3. Запустите оболочку:

```bash
python main.py
```

### 4. Завершение работы оболочки:

```bash
quit
exit
```

## Примеры работы
```bash
MiniShell > ls
file1.txt
"my doc.txt"
project/

MiniShell > cp "my doc.txt" backup.txt
Скопировано: my doc.txt -> backup.txt

MiniShell > rm -r project
Удалить директорию /home/user/project и всё её содержимое? (y/n): y
Директория удалена: /home/user/project

MiniShell > undo
Отмена удаления: восстановлен файл/директория /home/user/project

MiniShell > grep "TODO" project -r -i
project/todo.md:3: TODO: Завершить лабораторную работу

MiniShell > exit
Работа оболочки завершена. До свидания!
```
## Зависимости

```
pytest>=7.0.0
```